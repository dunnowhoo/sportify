{% extends 'base.html' %}

{% block meta %}
<title>Sportify</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            margin: 0;
            padding: 0;
        }
    
        .container {
            padding: 20px;
        }
    
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between; /* Space out items */
        }

        .logo {
            display: flex;
            align-items: center;
        }
    
    .logo img {
        width: 50px; /* Increase the width */
        height: 50px; /* Increase the height */
        border-radius: 50%;
        margin-right: 10px;
    }

    .header input {
        background-color: #333;
        border: none;
        border-radius: 20px;
        padding: 10px;
        color: white;
        width: 300px;
    }

    .profile {
        position: relative;
    }

    #search-bar {
        flex-grow: 1; /* Allow the search bar to grow */
        max-width: 400px; /* Limit maximum width */
        margin: 0 20px; /* Margin on left and right */
        background-color: #333;
        border: none;
        border-radius: 20px;
        padding: 10px;
        color: white;
    }


    .right-section {
        display: flex; /* Flexbox for buttons */
        align-items: center; /* Center buttons vertically */
    }


    .profile-button {
        background-color: transparent; /* No background */
        border: none;
        font-size: 20px; /* Size of the profile icon */
        cursor: pointer;
    }

    .profile-dropdown {
        display: none; /* Hidden by default */
        position: absolute;
        top: 40px; /* Position below the button */
        right: 0;
        background-color: #333;
        padding: 15px;
        border-radius: 10px;
        z-index: 1;
        width: 200px; /* Width of the dropdown */
        text-align: center;
    }

    .profile-dropdown p {
        margin: 0; /* Remove default margin */
        padding: 5px 0; /* Add some vertical spacing */
    }   

    .profile-dropdown button {
    background-color: #1db954; /* Green color for logout button */
    border: none;
    border-radius: 5px;
    color: white;
    padding: 10px; /* Add some padding */
    cursor: pointer; /* Pointer cursor */
    width: 100%; /* Full width */
    }

    .profile-dropdown button:hover {
        background-color: #1aa34a; /* Slightly darker green on hover */
    }

    .profile:hover .profile-dropdown,
    .profile:focus-within .profile-dropdown {
        display: block; /* Show dropdown on hover or focus */
    }

    .add-product {
        position: relative;
        margin-right: 10px; /* Space between buttons */
    }

    .add-product button {
        background-color: #1db954;
        border: none;
        border-radius: 50%;
        color: white;
        font-size: 20px;
        width: 40px; /* Increased size for better click area */
        height: 40px;
        cursor: pointer;
        margin-right: 5px;
    }

    .dropdown {
        display: none; /* Hidden by default */
        position: absolute;
        top: 50px; /* Adjusted to ensure it's below the button */
        right: 0;
        background-color: #333;
        padding: 20px; /* Padding for dropdown */
        border-radius: 10px;
        z-index: 1;
        width: 300px; /* Set a fixed width */
    }

    .dropdown input,
    .dropdown button {
        display: block;
        width: calc(100% - 20px); /* Full width minus padding */
        margin-bottom: 10px;
        padding: 10px;
        background-color: #555;
        border: none;
        border-radius: 5px;
        color: white;
    }

    .dropdown button {
        background-color: #1db954; /* Button color */
        cursor: pointer;
    }

    /* Show the dropdown on hover */
    .add-product:hover .dropdown,
    .add-product:focus-within .dropdown {
        display: block;
    }
    
    .categories {
        margin-top: 20px;
    }

    .categories h2 {
        margin-bottom: 10px;
    }

    .category-items {
        display: flex;
        gap: 10px;
    }

    .category-item {
        width: 150px;
        height: 150px;
        position: relative; /* For positioning the text */
        overflow: hidden; /* Ensures rounded corners work */
        border-radius: 10px; /* Rounded corners */
    }

    .category-item img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensures the image covers the area */
        border-radius: 10px; /* Round the image corners */
    }

    .product-image img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .product-actions {
    margin-top: 10px;
    display: flex;
    gap: 10px;
}

    .edit-button, .delete-button {
        background-color: #1db954; /* Green color */
        border: none;
        border-radius: 5px;
        color: white;
        padding: 10px;
        cursor: pointer;
    }

    .delete-button {
        background-color: #ff4d4d; /* Red color for delete */
    }

    .edit-button:hover {
        background-color: #1aa34a; /* Slightly darker green on hover */
    }

    .delete-button:hover {
        background-color: #ff3333; /* Darker red on hover */
    }

    .category-name {
        position: absolute; /* Position it relative to category-item */
        bottom: 10px; /* Space from the bottom */
        left: 10px; /* Space from the left */
        font-weight: bold; /* Bold text */
        color: white; /* White color */
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background for readability */
        padding: 5px; /* Padding around text */
        border-radius: 5px; /* Optional: round the corners of the text background */
    }
    
        .recent-products {
            margin-top: 40px;
        }
    
        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
    
        .product-item {
            background-color: #282828;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
    
        .product-item img {
            width: 100%;
            border-radius: 10px;
        }
    
        .product-info {
            margin-top: 10px;
        }

        .product-name {
            font-size: 1.5em; /* Make the product name larger */
            font-weight: bold; /* Make the product name bold */
            margin: 0; /* Remove default margin */
        }

        .product-price, .product-stock {
            margin: 5px 0; /* Add some space between price and stock */
        }

        .product-description {
            max-height: 4.5em; /* Limit the height of the description */
            overflow: hidden; /* Hide overflow text */
            text-overflow: ellipsis; /* Add ellipsis (...) for overflow */
            display: -webkit-box; /* For webkit browsers */
            -webkit-line-clamp: 3; /* Number of lines to display */
            -webkit-box-orient: vertical; /* Set the box orientation */
        }

    /* Style untuk tombol Buy */
    .buy-button {
        display: none;
        position: absolute;
        bottom: 20px;
        right: 20px;
        background-color: #1db954; /* Warna hijau untuk tombol buy */
        border: none;
        border-radius: 5px;
        padding: 10px;
        color: white;
        cursor: pointer;
    }

    /* Tampilkan tombol buy ketika produk di-hover */
    .product-item:hover .buy-button {
        display: block;
    }

    /* Style untuk tombol ketika produk habis */
    .buy-button.out-of-stock {
        background-color: #FF0000; /* Warna merah untuk out of stock */
        cursor: not-allowed;
        color: white;
        opacity: 0.7;
    }
</style>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}
    
        <!-- Categories section -->
        <div class="categories">
            <h2>Categories</h2>
            <div class="category-items">
                <div class="category-item">
                    <img src="https://i.imgur.com/eIi3SYq.png" alt="Footwear">
                    <span class="category-name">Footwear</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/16Zjiv1.png" alt="Apparel">
                    <span class="category-name">Apparel</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/LpmD7iu.png" alt="Equipment">
                    <span class="category-name">Equipment</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/E5VcaZl.png" alt="Accessories">
                    <span class="category-name">Accessories</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/1x4K3a0.png" alt="Footwear">
                    <span class="category-name">Outdoor Sports</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/VKq0YgG.png" alt="Apparel">
                    <span class="category-name">Team Sports</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/5nYtwN5.png" alt="Supplements">
                    <span class="category-name">Supplements</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/kc0Qc55.png" alt="Accessories">
                    <span class="category-name">Water Sports</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/Rse3wdA.png" alt="Safety Gear">
                    <span class="category-name">Safety Gear</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/cvOgWDR.png" alt="Yoga">
                    <span class="category-name">Yoga</span>
                </div>
                <div class="category-item">
                    <img src="https://i.imgur.com/fgRUfNS.png" alt="Cycling">
                    <span class="category-name">Cycling</span>
                </div>
            </div>
        </div>

<!-- Recent Products Section -->
<div class="recent-products">
    <h2>Recent Products</h2>
    <div class="product-grid">
        {% if products %}
        {% for product in products %}
        <div class="product-item">
            {% if product.image %}
            <img src="{{ product.image.url }}" alt="Product Image">
            {% else %}
            <img src="https://i.imgur.com/XLkw4CT.jpeg" alt="Default Image">
            {% endif %}
            <div class="product-info">
                <p class="product-name">{{ product.name }}</p>
                <p class="product-price">Price: ${{ product.price }}</p>
                <p class="product-description">{{ product.description }}</p>
                <p class="product-stock">Stock: {{ product.stock }}</p>
                <div class="product-actions mt-4">
                    <a href="{% url 'main:edit_product' product.id %}"
                        class="edit-button bg-yellow-500 hover:bg-yellow-600 text-white rounded p-2 transition duration-300 shadow-md flex items-center">
                        <!-- SVG Icon for Edit -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20"
                            fill="currentColor">
                            <path
                                d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                        </svg>
                    </a>
                    <form action="{% url 'main:delete_product' product.id %}" method="POST" class="delete-form"
                        onsubmit="return confirm('Are you sure you want to delete this product?');"
                        style="display:inline;">
                        {% csrf_token %}
                        <button type="submit"
                            class="delete-button bg-red-500 hover:bg-red-600 text-white rounded p-2 transition duration-300 shadow-md flex items-center">
                            <!-- SVG Icon for Delete -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                    clip-rule="evenodd"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
            {% if product.is_in_stock %}
            <button class="buy-button">Buy</button>
            {% else %}
            <button class="buy-button out-of-stock" disabled>Out of Stock</button>
            {% endif %}
        </div>
        {% endfor %}
        {% else %}
        <p class="text-left text-gray-300">Belum ada produk ⚽️</p>
        {% endif %}
    </div>
</div>


</div>

    <script>
        // Search bar functionality
        document.getElementById('search-bar').addEventListener('input', function () {
            const query = this.value.toLowerCase();
            const products = document.querySelectorAll('.product-item');

            products.forEach(product => {
                const name = product.querySelector('.product-info p').textContent.toLowerCase();
                if (name.includes(query)) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
        });

        document.querySelector('.dropdown-toggle').addEventListener('click', function () {
                const dropdown = document.querySelector('.dropdown');
                dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            });
    </script>
{% endblock content %}